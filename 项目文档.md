# MES设计文档

# 一、技术栈
## 前端技术栈
- 核心框架 ：React 19.1.0 + TypeScript 5.6.3
- 企业级解决方案 ：Ant Design Pro 6.0.0
- UI组件库 ：Ant Design 5.26.4
- 前端框架 ：Umi Max 4.3.24
- 专业组件 ：@ant-design/pro-components 2.8.9
- 图表库 ：@ant-design/charts 2.6.2、@ant-design/plots 2.6.3
- 工具库 ：
  - dayjs 1.11.13 (日期处理)
  - xlsx 0.18.5 (Excel文件处理)
  - classnames 2.5.1 (CSS类名管理)
  - swagger-ui-dist 5.27.1 (API文档)
## 后端技术栈
- 核心框架 ：.NET 8.0 + C#
- Web API ：ASP.NET Core
- ORM ：Entity Framework Core
- 数据库 ：PostgreSQL (配置在appsettings.json中)
- 任务调度 ：Quartz 3.8.1
- 身份验证 ：JWT (JSON Web Token)
- 架构模式 ：
  - 分层架构 (Application/Service/DbContexts/Entitys/Common)
  - 仓库模式 (Repository Pattern)
  - 依赖注入
## 架构特点
- 前后端分离 ：前端基于React，后端基于.NET Core Web API
- 模块化设计 ：业务逻辑按功能模块划分（生产管理、追溯信息、工单管理等）
- 领域驱动设计风格 ：清晰的实体定义和业务逻辑分离
- 多客户端支持 ：Web客户端 + WPF客户端（DeviceManage项目）
## 开发工具与流程
- 代码质量控制 ：
  - Biome.js 2.1.1 (代码格式化和lint)
  - Husky 9.1.7 + Lint-staged 16.1.2 (Git钩子)
- 包管理 ：pnpm
- CI/CD ：GitHub Actions (.github/workflows/dotnet.yml)
## 其他技术
- AI集成 ：豆包AI (配置在appsettings.json中)
- 桌面应用 ：WPF (MVVM模式)
- 国际化 ：支持多语言（zh-CN、en-US、ja-JP等）

# 二、项目启动方式
- 后端启动方式：
  - 进入src目录
  - 运行 `dotnet run`，默认监听地址为 http://0.0.0.0:5000，服务启动时会自动初始化数据库（如果数据库不存在）
- 前端启动方式：
  - 进入 `web_client_pro` 目录
  - 运行 `pnpm install`
  - 运行 `pnpm start`，默认监听地址为 http://localhost:8000

# 三、架构设计
## 前端架构 ：
web_client_pro/
├── src/
│   ├── assets/          # 静态资源
│   ├── components/      # 公共组件
│   ├── locales/         # 国际化资源
│   ├── pages/           # 页面组件
│   │   ├── dashboard/   # 仪表盘
│   │   ├── device/      # 设备管理
│   │   ├── systems/     # 系统管理
│   │   ├── Trace/       # 追溯管理
│   │   └── History/     # 历史记录
│   │   ├── infrastructure/ # 基础设施 
│   │   ├── productionEquipment/ # 生产设备管理
│   │   ├── table-list/  # 表格列表示例 
│   │   ├── user/        # 用户相关页面 
│   │   ├── 404.tsx      # 404错误页面 
│   │   ├── Admin.tsx    # 管理员页面 
│   │   ├── DynamicRouteLoader.tsx # 动态路由加载器
│   │   └── Welcome.tsx  # 欢迎页面 
│   ├── services/        # API服务和数据模型
│   ├── utils/           # 工具函数
│   ├── app.tsx          # 应用入口
│   └── global.tsx       # 全局配置
├── config/              # 项目配置
├── mock/                # 模拟数据 
└── public/              # 静态资源
## 后端架构 ：
src/ 
 ├── ChargePadLine.Application/       # 应用层（业务逻辑）
 │   ├── Trace/                       # 追溯模块
 │   │   └── Production/              # 生产相关业务
 │   └── ServiceCollectionExtesion.cs # 服务注入配置
 ├── ChargePadLine.Client/            # WPF客户端
 ├── ChargePadLine.Common/            # 通用工具类库
 ├── ChargePadLine.DbContexts/        # 数据库上下文
 ├── ChargePadLine.Entitys/           # 实体类
 │   ├── Systems/                     # 系统管理实体
 │   └── Trace/                       # 追溯模块实体
 ├── ChargePadLine.Service/           # 服务层
 └── ChargePadLine.WebApi/            # Web API
     ├── Controllers/                 # API控制器
     ├── Filters/                     # 过滤器
     ├── Program.cs                   # API入口
     └── appsettings.json             # 配置文件