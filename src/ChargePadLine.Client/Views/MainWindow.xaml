<Window x:Class="ChargePadLine.Client.Views.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:ChargePadLine.Client.Views"
        xmlns:hc="https://handyorg.github.io/handycontrol"
        xmlns:helpers="clr-namespace:ChargePadLine.Client.Helpers"
        mc:Ignorable="d"
        Title="MES Client - 产线管理系统" Height="720" Width="1180"
        WindowStartupLocation="CenterScreen"
        Background="{x:Static SystemColors.ControlBrush}">
    <Grid Margin="18">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="111*"/>
            <ColumnDefinition Width="0*"/>
            <ColumnDefinition Width="0*"/>
            <ColumnDefinition Width="1033*"/>
        </Grid.ColumnDefinitions>
        <Grid.RowDefinitions>
            <RowDefinition Height="35*"/>
            <RowDefinition Height="56*"/>
            <RowDefinition Height="578*"/>
        </Grid.RowDefinitions>
        <Grid.Background>
            <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                <GradientStop Color="#0F1B2C" Offset="0"/>
                <GradientStop Color="#142E44" Offset="0.45"/>
                <GradientStop Color="#0F1B2C" Offset="1"/>
            </LinearGradientBrush>
        </Grid.Background>

        <Border Background="lavender"
                CornerRadius="14"
                Padding="18"
                Effect="{DynamicResource ShadowDepth3}" Grid.RowSpan="3" Grid.ColumnSpan="4" Margin="-18,-16,-16,-19">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="9*"/>
                    <ColumnDefinition Width="1116*"/>
                    <ColumnDefinition Width="13*"/>
                    <ColumnDefinition Width="4*"/>
                </Grid.ColumnDefinitions>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="47*"/>
                    <RowDefinition Height="485*"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>

                <!-- 标题栏：保持系统窗口按钮，加入副标题与时间 -->
                <Border Grid.Row="0"
                        Background="#8470FF"
                        CornerRadius="10"
                        Padding="18,7"
                        Margin="-10,-20,-10,14" Grid.ColumnSpan="4">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>

                        <StackPanel Orientation="Vertical">
                            <TextBlock Text="嘉和MES产线客户端"
                                       Style="{StaticResource HeaderText}"
                                       Foreground="White"
                                       FontSize="22"
                                       FontWeight="SemiBold"
                                       Margin="0,0,0,4"/>
                            <TextBlock Text="产线状态 · 实时监控 · 快捷运维"
                                       Foreground="#E5F2FF"
                                       FontSize="12"/>
                        </StackPanel>

                        <StackPanel Grid.Column="1" Orientation="Horizontal" VerticalAlignment="Center">
                            <Border Background="#1E3652" CornerRadius="6" Padding="10,6" Margin="0,0,12,0">
                                <TextBlock Text="{Binding CurrentTime.Value, FallbackValue='--:--:--'}"
                                           Foreground="#E5F2FF"
                                           FontSize="13"
                                           FontWeight="SemiBold"/>
                            </Border>
                            <Border Background="#1E3652" CornerRadius="6" Padding="10,6">
                                <TextBlock Text="{Binding CurrentShift.Value, FallbackValue='当班次：A'}"
                                           Foreground="#E5F2FF"
                                           FontSize="13"/>
                            </Border>
                        </StackPanel>
                    </Grid>
                </Border>

                <!-- 主内容区 -->
                <Grid Grid.ColumnSpan="4" Margin="0,60,0,69" Grid.RowSpan="4">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="411*"/>
                        <ColumnDefinition Width="69*"/>
                        <ColumnDefinition Width="91*"/>
                    </Grid.ColumnDefinitions>

                    <!-- 左侧监控区 -->
                    <Border Grid.Column="0"
                            Background="white"
                            CornerRadius="12"
                            Padding="10"
                            Effect="{DynamicResource ShadowDepth1}" Margin="-10,-15,0,-20">
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="*"/>
                            </Grid.RowDefinitions>
                            <local:MonitorView Grid.Row="1"
                                               Margin="0"
                                               DataContext="{Binding MonitorViewModel}"/>
                        </Grid>
                    </Border>

                    <!-- 右侧日志区 -->
                    <Border Grid.Column="1"
                            Background="White"
                            CornerRadius="12"
                            Padding="10"
                            Effect="{DynamicResource ShadowDepth1}"
                            Margin="5,-15,-15,-20" Grid.ColumnSpan="2">
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="*"/>
                            </Grid.RowDefinitions>
                            <local:LogView Grid.Row="1"
                                           Margin="0"
                                           DataContext="{Binding LogViewModel}"/>
                        </Grid>
                    </Border>
                </Grid>

                <!-- 状态栏：CPU/内存/网络等实时状态 -->
                <Border Grid.Row="3"
                        Background="#0F1B2C"
                        CornerRadius="10"
                        Padding="12,10"
                        Margin="-10,30,-10,-10" Grid.ColumnSpan="4">
                    <UniformGrid Columns="4" HorizontalAlignment="Stretch" VerticalAlignment="Center">
                        <StackPanel Orientation="Vertical" HorizontalAlignment="Center">
                            <TextBlock Text="CPU" Foreground="#8FB8FF" FontSize="12" Margin="0,0,0,2"/>
                            <TextBlock Text="{Binding CpuUsage.Value, StringFormat={}{0:P0}, FallbackValue=18%}"
                                       Foreground="White" FontSize="14" FontWeight="SemiBold"/>
                        </StackPanel>
                        <StackPanel Orientation="Vertical" HorizontalAlignment="Center">
                            <TextBlock Text="内存" Foreground="#8FB8FF" FontSize="12" Margin="0,0,0,2"/>
                            <TextBlock Text="{Binding MemoryUsage.Value, StringFormat={}{0:P0}, FallbackValue=42%}"
                                       Foreground="White" FontSize="14" FontWeight="SemiBold"/>
                        </StackPanel>
                        <StackPanel Orientation="Vertical" HorizontalAlignment="Center">
                            <TextBlock Text="硬盘" Foreground="#8FB8FF" FontSize="12" Margin="0,0,0,2"/>
                            <TextBlock Text="{Binding HardDisk.Value, StringFormat={}{0:P0}, FallbackValue=20%}"
                                       Foreground="White" FontSize="14" FontWeight="SemiBold"/>
                        </StackPanel>
                        <StackPanel Orientation="Vertical" HorizontalAlignment="Center">
                            <TextBlock Text="状态" Foreground="#8FB8FF" FontSize="12" Margin="0,0,0,2"/>
                            <TextBlock Text="{Binding Health.Value, FallbackValue=就绪}"
                                       Foreground="#6EE7B7" FontSize="14" FontWeight="SemiBold"/>
                        </StackPanel>
                    </UniformGrid>
                </Border>
            </Grid>
        </Border>
    </Grid>
</Window>
